<md-content flex class="md-padding">
    <form name="editMcq" ng-submit="ctrl.save(ctrl.questions)" >
        {{ctrl.data}}
        <div align="center">
            <h3>Multiple Choice</h3>
            <h4>Title: {{ctrl.task.title}}</h4>
            <h4>Description: {{ctrl.task.description}}</h4>
            <br><br>
        </div>
        <!-- toggle buttons -->

        <!--this is for?-->
        <div ng-hide="ctrl.isNonAdmin">
        <p>
            <md-switch class="md-primary" ng-model="ctrl.timelimit" >
                Set time limit for the entire quiz
            </md-switch>


            <md-input-container ng-hide="!ctrl.timelimit" >
                <label for="edit-time-limit">Time Limit (in minute)</label>
                <input type="number" name="editTimeLimit" id="edit-time-limit"
                       ng-model="ctrl.task.timelimit"
                       min="0" step="1"
                       placeholer="Time Limit for the quiz" value=""
                />
                <div ng-messages="editMcq.editTimeLimit.$error">
                    <div ng-message="number">Time limit allowed should be a positive number in minutes.</div>
                </div>
            </md-input-container>
        </p>

        <p>
            <h5>Pre & Post Surveys</h5>

            <md-switch class="md-primary" ng-model="ctrl.survey" aria-label="survey">
                Enable Pre & Post Surveys
            </md-switch>

            <!--todo: dropdown list of surveys-->
            <md-input-container ng-hide="!ctrl.survey">
                <label for="survey">Survey Titles</label>
                <md-select id="survey" ng-model="ctrl.task.survey">
                    <!--
                    <md-option ng-repeat="state in states" value="{{state.abbrev}}">
                        {{state.abbrev}}
                    </md-option>-->

                    <md-option value="hello">
                        Survey Title 1
                    </md-option>
                    <md-option value="hello2">
                        Survey Titile 2
                    </md-option>
                </md-select>
            </md-input-container>

        </p>

        <p>
        <h5>Pre/Post Quiz Video</h5>
            <md-switch class="md-primary" ng-model="ctrl.task.video.pre" aria-label="">
                Enable pre-quiz video
            </md-switch>

            <!--todo: ask for link to the video-->
            <md-input-container ng-hide="!ctrl.task.video.pre">
                <label for="video-pre">Pre Video Link</label>
                <input type="text" name="videoPre" id="video-pre"
                       ng-model="ctrl.task.video.preLink"
                       pattern="^(https?://.+|#/).+$"
                       placeholer="Video Link to Pre Quiz Video" value="{{ctrl.task.video.preLink}}"
                />
                <div ng-messages="editMcq.videoPre.$error">
                    <div ng-message="pattern">Wrong format for an absolute or relative URL. E.g. https://www.</div>
                </div>

            </md-input-container>

            <md-switch class="md-primary" ng-model="ctrl.task.video.post" aria-label="">
                Enable post-quiz video
            </md-switch>
            <!--todo: ask for link to the video-->
            <md-input-container ng-hide="!ctrl.task.video.post">
                <label for="video-post">Post Video Link</label>
                <input type="text" name="videoPost" id="video-post"
                       ng-model="ctrl.task.video.postLink"
                       pattern="^(https?://.+|#/).+$"
                       placeholer="Video Link to Post Quiz Video" value="{{ctrl.task.video.postLink}}"
                />
                <div ng-messages="editMcq.videoPost.$error">
                    <div ng-message="pattern">Wrong format for an absolute or relative URL. E.g. https://www.</div>
                </div>

            </md-input-container>

        </p>

        <p>
            <h5>Questions</h5>
            <md-switch class="md-primary" ng-model="ctrl.task.randomQOrder" aria-label="">
                Randomise questions order
            </md-switch>

            <md-switch class="md-primary" ng-model="ctrl.task.randomOOrder" aria-label="">
                Randomise options order
            </md-switch>
        </p>

        <p>
            <h5>Results Release</h5>
            Release students' results after completion in
            <input type="number" name="resultRelease" id="result-release"
                   ng-model="ctrl.task.resultRelease"
                   min="0" step="1"
                   placeholer="Release students' results after completion in (minutes)" value="" required
            /> minutes.
            <div ng-messages="editMcq.resultRelease.$error">
                <div ng-message="number">Release time after completion should be a positive number in minutes.</div>
                <div ng-message="required">Please enter time(minutes) to release results after completion.</div>
            </div>
        </p>

        <p>
            <h5>Team Mode</h5>
            <md-switch class="md-primary" ng-model="ctrl.task.enableTeam" aria-label="">
                Enable team answering mode
            </md-switch>
        </p>
        </div>

<!------------------starting of questions--------------------------------------------->

        <div align="center">
            <h4>Question Details</h4>
        </div>

        <div ng-repeat="question in ctrl.questions">
            <h3>
                Question {{$index + 1}}
                <md-button class="md-raised" ng-click="ctrl.removeQuestion($event,$index)" ng-disabled = "ctrl.questions.length == 1">Delete this question</md-button>
            </h3>


            <div align="center" layout="row" >
                <md-input-container flex>
                    <label for="edit-question_{{$index}}">Question</label>
                    <input type="text" name="editQuestion" id="edit-question_{{$index}}"
                           ng-model="question.text"
                           placeholer="Question"
                    />
                </md-input-container>
            </div>

            <md-input-container >
                <md-button type="button" class="md-raised md-primary" ng-click="ctrl.addOption(question)">Add option</md-button>
            </md-input-container>

            <!--answer options-->
            <div align="center" layout="row" ng-repeat="option in question.options" >

                <md-input-container flex >
                    <label for="q-option_{{$index}}">Option</label>
                    <input type="text" name="editQuestion" id="q-option_{{$index}}"
                           ng-model="option.text"
                           placeholer="Options"
                    />
                </md-input-container>

                <!--todo: required at least one option to be the answer.-->
                <md-input-container>
                    <md-button ng-model="question.answers" ng-class="question.answers.indexOf($index) != -1 ? 'md-raised md-primary' : 'md-raised'"
                               ng-click="ctrl.toggleOption(question, $index)">This is the answer</md-button>
                </md-input-container>

                <md-input-container >
                    <md-button class="md-raised" ng-click="ctrl.removeOption(question,$index)" ng-disabled = "question.options.length == 1">Delete option</md-button>
                </md-input-container>
            </div>

        </div>


        <br>
        <div align="center">
            <!--todo: can add new set of question-->
            <md-button type="button" class="md-raised md-primary" ng-click ="ctrl.addQuestion()">Add question</md-button>
        </div>

        <br>

        <div align="center">
            <md-button type="submit" class="md-raised md-primary">Save</md-button>
            <md-button type="reset" class="md-raised" ng-click="ctrl.discardChanges($event)">Back</md-button>
        </div>
    </form>

</md-content>